<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ninja Warrior</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 500px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }
        
        #gameCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .score-display {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .health-bar {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 200px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .health-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #ff0000, #ff9900);
            border-radius: 10px;
            transition: width 0.3s;
        }
        
        .controls-info {
            position: absolute;
            bottom: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 16px;
            opacity: 0.8;
        }
        
        .swipe-indicator {
            position: absolute;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }
        
        .swipe-up {
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .swipe-left {
            bottom: 30px;
            left: 30%;
            transform: translateX(-50%);
        }
        
        .swipe-right {
            bottom: 30px;
            left: 70%;
            transform: translateX(-50%);
        }
        
        .game-start, .game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10;
        }
        
        .game-over {
            display: none;
        }
        
        h1 {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
            color: #ff9900;
        }
        
        h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #ff9900;
        }
        
        button {
            padding: 15px 30px;
            font-size: 20px;
            background: linear-gradient(135deg, #ff9900, #ff0000);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            pointer-events: auto;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .instructions {
            max-width: 600px;
            text-align: center;
            margin: 20px 0;
            line-height: 1.6;
            font-size: 18px;
        }
        
        .combo-display {
            position: absolute;
            top: 60px;
            left: 20px;
            font-size: 18px;
            color: #ff9900;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        @media (max-width: 768px) {
            .game-container {
                height: 80vh;
            }
            
            h1 {
                font-size: 36px;
            }
            
            h2 {
                font-size: 28px;
            }
            
            .controls-info {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <canvas id="gameCanvas"></canvas>
        
        <div class="ui-overlay">
            <div class="score-display">Score: <span id="score">0</span></div>
            <div class="combo-display">Combo: <span id="combo">0</span>x</div>
            <div class="health-bar">
                <div class="health-fill" id="health"></div>
            </div>
            
            <div class="swipe-indicator swipe-up">↑</div>
            <div class="swipe-indicator swipe-left">←</div>
            <div class="swipe-indicator swipe-right">→</div>
            
            <div class="controls-info">
                Swipe Up to Jump | Swipe Left/Right to Attack
            </div>
        </div>
        
        <div class="game-start" id="startScreen">
            <h1>NINJA WARRIOR</h1>
            <div class="instructions">
                Defeat enemies with your ninja skills!<br>
                Swipe up to jump over obstacles.<br>
                Swipe left or right to attack enemies.<br>
                Build combos for higher scores!
            </div>
            <button id="startButton">START GAME</button>
        </div>
        
        <div class="game-over" id="gameOverScreen">
            <h2>GAME OVER</h2>
            <div class="score-display">Final Score: <span id="finalScore">0</span></div>
            <div class="combo-display">Highest Combo: <span id="highestCombo">0</span>x</div>
            <button id="restartButton">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        // Game variables
        let canvas, ctx;
        let gameRunning = false;
        let score = 0;
        let combo = 0;
        let highestCombo = 0;
        let health = 100;
        let gameSpeed = 1;
        
        // Player variables
        let player = {
            x: 100,
            y: 350,
            width: 60,
            height: 80,
            velocityY: 0,
            jumping: false,
            attacking: false,
            attackDirection: 0, // -1 for left, 1 for right
            attackCooldown: 0,
            grounded: true
        };
        
        // Enemy variables
        let enemies = [];
        let enemySpawnTimer = 0;
        
        // Platform variables
        let platforms = [
            { x: 0, y: 430, width: 800, height: 70 }
        ];
        
        // Swipe detection variables
        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        let touchEndY = 0;
        let minSwipeDistance = 30;
        
        // Initialize game
        function init() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            
            // Set canvas dimensions
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // Update platform width to match canvas
            platforms[0].width = canvas.width;
            
            // Event listeners
            document.getElementById('startButton').addEventListener('click', startGame);
            document.getElementById('restartButton').addEventListener('click', restartGame);
            
            // Touch events for mobile
            canvas.addEventListener('touchstart', handleTouchStart, { passive: false });
            canvas.addEventListener('touchmove', handleTouchMove, { passive: false });
            canvas.addEventListener('touchend', handleTouchEnd, { passive: false });
            
            // Mouse events for PC
            canvas.addEventListener('mousedown', handleMouseDown, false);
            canvas.addEventListener('mouseup', handleMouseUp, false);
            
            // Keyboard events for testing
            window.addEventListener('keydown', handleKeyDown);
            
            // Show swipe indicators briefly on mobile
            if ('ontouchstart' in window) {
                showSwipeIndicators();
            }
        }
        
        // Start the game
        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            gameRunning = true;
            score = 0;
            combo = 0;
            health = 100;
            gameSpeed = 1;
            
            // Reset player
            player.x = 100;
            player.y = 350;
            player.velocityY = 0;
            player.jumping = false;
            player.attacking = false;
            player.grounded = true;
            
            // Clear enemies
            enemies = [];
            enemySpawnTimer = 0;
            
            updateHealthDisplay();
            updateScoreDisplay();
            updateComboDisplay();
            
            gameLoop();
        }
        
        // Restart the game
        function restartGame() {
            document.getElementById('gameOverScreen').style.display = 'none';
            startGame();
        }
        
        // Main game loop
        function gameLoop() {
            if (!gameRunning) return;
            
            update();
            render();
            
            requestAnimationFrame(gameLoop);
        }
        
        // Update game state
        function update() {
            // Update player
            updatePlayer();
            
            // Update enemies
            updateEnemies();
            
            // Spawn enemies
            enemySpawnTimer++;
            if (enemySpawnTimer > 120 / gameSpeed) { // Spawn every 2 seconds at 60fps
                spawnEnemy();
                enemySpawnTimer = 0;
            }
            
            // Gradually increase game speed
            gameSpeed += 0.0005;
            
            // Check for game over
            if (health <= 0) {
                gameOver();
            }
        }
        
        // Update player state
        function updatePlayer() {
            // Apply gravity
            player.velocityY += 0.5;
            player.y += player.velocityY;
            
            // Check platform collision
            player.grounded = false;
            for (let platform of platforms) {
                if (player.y + player.height >= platform.y && 
                    player.y + player.height <= platform.y + 10 &&
                    player.x + player.width > platform.x && 
                    player.x < platform.x + platform.width &&
                    player.velocityY > 0) {
                    player.y = platform.y - player.height;
                    player.velocityY = 0;
                    player.jumping = false;
                    player.grounded = true;
                }
            }
            
            // Update attack cooldown
            if (player.attackCooldown > 0) {
                player.attackCooldown--;
            } else {
                player.attacking = false;
            }
            
            // Apply boundaries
            if (player.y > canvas.height) {
                player.y = canvas.height - player.height;
                player.velocityY = 0;
                player.jumping = false;
                player.grounded = true;
            }
        }
        
        // Update enemies
        function updateEnemies() {
            for (let i = enemies.length - 1; i >= 0; i--) {
                let enemy = enemies[i];
                
                // Move enemy
                enemy.x += enemy.speed * gameSpeed;
                
                // Check if enemy is off screen
                if ((enemy.speed < 0 && enemy.x < -enemy.width) || 
                    (enemy.speed > 0 && enemy.x > canvas.width)) {
                    enemies.splice(i, 1);
                    continue;
                }
                
                // Check for player attack collision
                if (player.attacking) {
                    let attackX = player.x + (player.attackDirection === 1 ? player.width : -30);
                    let attackY = player.y + player.height / 2;
                    
                    if (Math.abs(attackX - enemy.x) < 50 && 
                        Math.abs(attackY - enemy.y) < 50) {
                        // Enemy defeated
                        enemies.splice(i, 1);
                        score += 10 * (combo + 1);
                        combo++;
                        if (combo > highestCombo) highestCombo = combo;
                        updateScoreDisplay();
                        updateComboDisplay();
                        continue;
                    }
                }
                
                // Check for player collision (damage)
                if (Math.abs(player.x - enemy.x) < 50 && 
                    Math.abs(player.y - enemy.y) < 60) {
                    health -= 10;
                    updateHealthDisplay();
                    combo = 0;
                    updateComboDisplay();
                    enemies.splice(i, 1);
                }
            }
        }
        
        // Spawn a new enemy
        function spawnEnemy() {
            let side = Math.random() > 0.5 ? 1 : -1; // 1 for right, -1 for left
            let enemyType = Math.random() > 0.7 ? 'strong' : 'normal';
            let speed = enemyType === 'strong' ? 4 : 2;
            
            let enemy = {
                x: side === 1 ? -50 : canvas.width + 50,
                y: 370,
                width: 40,
                height: 60,
                speed: side * speed,
                type: enemyType
            };
            enemies.push(enemy);
        }
        
        // Render game
        function render() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw background
            drawBackground();
            
            // Draw platforms
            drawPlatforms();
            
            // Draw player
            drawPlayer();
            
            // Draw enemies
            drawEnemies();
            
            // Draw attack effect if attacking
            if (player.attacking) {
                drawAttackEffect();
            }
        }
        
        // Draw background
        function drawBackground() {
            // Sky gradient
            let gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, "#1a1a2e");
            gradient.addColorStop(1, "#16213e");
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Moon
            ctx.fillStyle = "rgba(255, 255, 255, 0.1)";
            ctx.beginPath();
            ctx.arc(canvas.width - 100, 100, 50, 0, Math.PI * 2);
            ctx.fill();
            
            // Stars
            ctx.fillStyle = "white";
            for (let i = 0; i < 50; i++) {
                let x = Math.random() * canvas.width;
                let y = Math.random() * canvas.height * 0.7;
                let size = Math.random() * 2;
                ctx.fillRect(x, y, size, size);
            }
        }
        
        // Draw platforms
        function drawPlatforms() {
            ctx.fillStyle = "#444";
            for (let platform of platforms) {
                ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                
                // Platform top highlight
                ctx.fillStyle = "#666";
                ctx.fillRect(platform.x, platform.y, platform.width, 3);
                ctx.fillStyle = "#444";
            }
        }
        
        // Draw player
        function drawPlayer() {
            // Body
            ctx.fillStyle = "#333";
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // Head
            ctx.fillStyle = "#222";
            ctx.fillRect(player.x + 10, player.y - 20, player.width - 20, 20);
            
            // Eyes
            ctx.fillStyle = "white";
            ctx.fillRect(player.x + 15, player.y - 15, 5, 5);
            ctx.fillRect(player.x + player.width - 20, player.y - 15, 5, 5);
            
            // Mask
            ctx.fillStyle = "#111";
            ctx.fillRect(player.x + 10, player.y, player.width - 20, 10);
            
            // Sword
            if (player.attacking) {
                ctx.fillStyle = "#ddd";
                ctx.fillRect(player.x + (player.attackDirection === 1 ? player.width : -20), 
                             player.y + player.height / 2 - 5, 20, 10);
            }
        }
        
        // Draw enemies
        function drawEnemies() {
            for (let enemy of enemies) {
                // Body
                ctx.fillStyle = enemy.type === 'strong' ? "#a11" : "#822";
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                
                // Head
                ctx.fillStyle = enemy.type === 'strong' ? "#811" : "#611";
                ctx.fillRect(enemy.x + 5, enemy.y - 15, enemy.width - 10, 15);
                
                // Eyes
                ctx.fillStyle = "yellow";
                ctx.fillRect(enemy.x + 10, enemy.y - 10, 5, 5);
                ctx.fillRect(enemy.x + enemy.width - 15, enemy.y - 10, 5, 5);
                
                // Strong enemy indicator
                if (enemy.type === 'strong') {
                    ctx.fillStyle = "gold";
                    ctx.beginPath();
                    ctx.arc(enemy.x + enemy.width/2, enemy.y - 25, 8, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }
        
        // Draw attack effect
        function drawAttackEffect() {
            ctx.fillStyle = "rgba(255, 255, 0, 0.3)";
            let attackX = player.x + (player.attackDirection === 1 ? player.width : -30);
            let attackY = player.y + player.height / 2;
            ctx.beginPath();
            ctx.arc(attackX, attackY, 40, 0, Math.PI * 2);
            ctx.fill();
        }
        
        // Handle touch start
        function handleTouchStart(event) {
            touchStartX = event.touches[0].clientX;
            touchStartY = event.touches[0].clientY;
            event.preventDefault();
        }
        
        // Handle touch move
        function handleTouchMove(event) {
            event.preventDefault();
        }
        
        // Handle touch end
        function handleTouchEnd(event) {
            touchEndX = event.changedTouches[0].clientX;
            touchEndY = event.changedTouches[0].clientY;
            handleSwipe();
            event.preventDefault();
        }
        
        // Handle mouse down (for PC)
        function handleMouseDown(event) {
            touchStartX = event.clientX;
            touchStartY = event.clientY;
        }
        
        // Handle mouse up (for PC)
        function handleMouseUp(event) {
            touchEndX = event.clientX;
            touchEndY = event.clientY;
            handleSwipe();
        }
        
        // Handle keyboard input (for testing)
        function handleKeyDown(event) {
            if (!gameRunning) return;
            
            switch(event.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    jump();
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    attack(-1);
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    attack(1);
                    break;
            }
        }
        
        // Process swipe gesture
        function handleSwipe() {
            if (!gameRunning) return;
            
            let dx = touchEndX - touchStartX;
            let dy = touchEndY - touchStartY;
            
            // Minimum swipe distance
            if (Math.abs(dx) < minSwipeDistance && Math.abs(dy) < minSwipeDistance) return;
            
            // Determine swipe direction
            if (Math.abs(dx) > Math.abs(dy)) {
                // Horizontal swipe
                if (dx > 0) {
                    attack(1); // Swipe right
                } else {
                    attack(-1); // Swipe left
                }
            } else {
                // Vertical swipe
                if (dy < 0) {
                    jump(); // Swipe up
                }
            }
        }
        
        // Make player jump
        function jump() {
            if (player.grounded) {
                player.velocityY = -15;
                player.jumping = true;
                player.grounded = false;
                
                // Show swipe indicator
                showSwipeIndicator('.swipe-up');
            }
        }
        
        // Make player attack
        function attack(direction) {
            if (player.attackCooldown === 0) {
                player.attacking = true;
                player.attackDirection = direction;
                player.attackCooldown = 20;
                
                // Show swipe indicator
                showSwipeIndicator(direction === 1 ? '.swipe-right' : '.swipe-left');
            }
        }
        
        // Show swipe indicator
        function showSwipeIndicator(selector) {
            let indicator = document.querySelector(selector);
            indicator.style.opacity = '1';
            setTimeout(() => {
                indicator.style.opacity = '0';
            }, 300);
        }
        
        // Show all swipe indicators briefly (on mobile)
        function showSwipeIndicators() {
            let indicators = document.querySelectorAll('.swipe-indicator');
            indicators.forEach(indicator => {
                indicator.style.opacity = '1';
            });
            
            setTimeout(() => {
                indicators.forEach(indicator => {
                    indicator.style.opacity = '0';
                });
            }, 2000);
        }
        
        // Update score display
        function updateScoreDisplay() {
            document.getElementById('score').textContent = score;
        }
        
        // Update combo display
        function updateComboDisplay() {
            document.getElementById('combo').textContent = combo;
        }
        
        // Update health display
        function updateHealthDisplay() {
            document.getElementById('health').style.width = health + '%';
        }
        
        // Game over
        function gameOver() {
            gameRunning = false;
            document.getElementById('finalScore').textContent = score;
            document.getElementById('highestCombo').textContent = highestCombo;
            document.getElementById('gameOverScreen').style.display = 'flex';
        }
        
        // Initialize game when page loads
        window.onload = init;
    </script>
</body>
</html>